<!DOCTYPE html><html lang="zh-Hans"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title>Kubernetesçš„å®‰è£…å’Œä½¿ç”¨ï¼ˆä¸€ï¼‰ - ä¾¯é”çš„æ€è€ƒä¸åˆ†äº«</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><meta name="keywords" content="è¿ç»´,k8s,äº‘åŸç”Ÿ"><meta name="description" content="&lt;h3 id=&#34;ç›®å½•&#34;&gt;&lt;a href=&#34;#ç›®å½•&#34; class=&#34;headerlink&#34; title=&#34;ç›®å½•&#34;&gt;&lt;/a&gt;ç›®å½•&lt;/h3&gt;&lt;p&gt;&lt;a href=&#34;/2022/10/30/Kubernetes-installation-and-use-1/&#34;&gt;Kubernetesçš„å®‰è£…å’Œä½¿ç”¨ï¼ˆä¸€ï¼‰&lt;/a&gt;&lt;br&gt;&lt;a href=&#34;/2022/10/30/Kubernetes-installation-and-use-2/&#34;&gt;Kubernetesçš„å®‰è£…å’Œä½¿ç”¨ï¼ˆäºŒï¼‰&lt;/a&gt;&lt;br&gt;&lt;a href=&#34;/2022/10/30/Kubernetes-installation-and-use-3/&#34;&gt;Kubernetesçš„å®‰è£…å’Œä½¿ç”¨ï¼ˆä¸‰ï¼‰&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;k8sçš„ä»‹ç»&#34;&gt;&lt;a href=&#34;#k8sçš„ä»‹ç»&#34; class=&#34;headerlink&#34; title=&#34;k8sçš„ä»‹ç»&#34;&gt;&lt;/a&gt;k8sçš„ä»‹ç»&lt;/h2&gt;&lt;p&gt;k8sæ˜¯ä¸€ç§å¯ä»¥å®ç°å®¹å™¨é›†ç¾¤çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ã€è‡ªåŠ¨æ‰©ç¼©å®¹ã€ç»´æŠ¤ç­‰åŠŸèƒ½çš„æœåŠ¡ã€‚Dockerè§£å†³äº†åº”ç”¨è¿è¡Œæ—¶ç¯å¢ƒçš„é—®é¢˜ï¼Œè€Œk8såˆ™å¯ä»¥ç”¨æ¥æ„å»ºå¤§é‡åº”ç”¨æœåŠ¡ï¼Œå®ƒèƒ½æ–¹ä¾¿çš„ç®¡ç†æµ·é‡åº”ç”¨å®¹å™¨ã€‚å®ƒæ‹¥æœ‰"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ä¾¯é”çš„æ€è€ƒä¸åˆ†äº«" type="application/atom+xml"></head><body><div class="container"><header class="header"><div class="blog-title"><a href="/" class="logo">ä¾¯é”çš„æ€è€ƒä¸åˆ†äº«</a><div class="subtitle"></div></div><nav class="navbar"><ul class="menu"><li class="menu-item"><a href="/" class="menu-item-link" data-no-instant>ä¸»é¡µ</a></li><li class="menu-item"><a href="/atom.xml" class="menu-item-link" data-no-instant>è®¢é˜…</a></li><li class="menu-item"><a href="/search" class="menu-item-link" data-no-instant>æœç´¢</a></li></ul></nav></header><article class="post"><div class="post-title"><h1 class="article-title">Kubernetesçš„å®‰è£…å’Œä½¿ç”¨ï¼ˆä¸€ï¼‰</h1></div><div class="post-meta"><span class="post-time">2022-10-30</span></div><div class="post-content"><h3 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h3><p><a href="/2022/10/30/Kubernetes-installation-and-use-1/">Kubernetesçš„å®‰è£…å’Œä½¿ç”¨ï¼ˆä¸€ï¼‰</a><br><a href="/2022/10/30/Kubernetes-installation-and-use-2/">Kubernetesçš„å®‰è£…å’Œä½¿ç”¨ï¼ˆäºŒï¼‰</a><br><a href="/2022/10/30/Kubernetes-installation-and-use-3/">Kubernetesçš„å®‰è£…å’Œä½¿ç”¨ï¼ˆä¸‰ï¼‰</a></p><h2 id="k8sçš„ä»‹ç»"><a href="#k8sçš„ä»‹ç»" class="headerlink" title="k8sçš„ä»‹ç»"></a>k8sçš„ä»‹ç»</h2><p>k8sæ˜¯ä¸€ç§å¯ä»¥å®ç°å®¹å™¨é›†ç¾¤çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ã€è‡ªåŠ¨æ‰©ç¼©å®¹ã€ç»´æŠ¤ç­‰åŠŸèƒ½çš„æœåŠ¡ã€‚Dockerè§£å†³äº†åº”ç”¨è¿è¡Œæ—¶ç¯å¢ƒçš„é—®é¢˜ï¼Œè€Œk8såˆ™å¯ä»¥ç”¨æ¥æ„å»ºå¤§é‡åº”ç”¨æœåŠ¡ï¼Œå®ƒèƒ½æ–¹ä¾¿çš„ç®¡ç†æµ·é‡åº”ç”¨å®¹å™¨ã€‚å®ƒæ‹¥æœ‰è‡ªåŠ¨åŒ…è£…ã€è‡ªæˆ‘ä¿®å¤ã€æ¨ªå‘ç¼©æ”¾ã€æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€è‡ªåŠ¨éƒ¨ç½²ã€å‡çº§å›æ»šã€å­˜å‚¨ç¼–æ’ç­‰ç‰¹æ€§ã€‚</p><h3 id="k8sçš„èŠ‚ç‚¹åˆ†ä¸ºmasterå’Œnodeï¼Œå®ƒçš„æ¶æ„å¦‚ä¸‹"><a href="#k8sçš„èŠ‚ç‚¹åˆ†ä¸ºmasterå’Œnodeï¼Œå®ƒçš„æ¶æ„å¦‚ä¸‹" class="headerlink" title="k8sçš„èŠ‚ç‚¹åˆ†ä¸ºmasterå’Œnodeï¼Œå®ƒçš„æ¶æ„å¦‚ä¸‹"></a>k8sçš„èŠ‚ç‚¹åˆ†ä¸ºmasterå’Œnodeï¼Œå®ƒçš„æ¶æ„å¦‚ä¸‹</h3><h4 id="Masterï¼šå®˜æ–¹å«åšæ§åˆ¶å¹³é¢ï¼ˆControl-Planeï¼‰ï¼Œå®ƒç”¨äºè´Ÿè´£æ•´ä¸ªé›†ç¾¤çš„ç®¡æ§ã€‚masterç”±4ä¸ªéƒ¨åˆ†ç»„æˆ"><a href="#Masterï¼šå®˜æ–¹å«åšæ§åˆ¶å¹³é¢ï¼ˆControl-Planeï¼‰ï¼Œå®ƒç”¨äºè´Ÿè´£æ•´ä¸ªé›†ç¾¤çš„ç®¡æ§ã€‚masterç”±4ä¸ªéƒ¨åˆ†ç»„æˆ" class="headerlink" title="Masterï¼šå®˜æ–¹å«åšæ§åˆ¶å¹³é¢ï¼ˆControl Planeï¼‰ï¼Œå®ƒç”¨äºè´Ÿè´£æ•´ä¸ªé›†ç¾¤çš„ç®¡æ§ã€‚masterç”±4ä¸ªéƒ¨åˆ†ç»„æˆ"></a>Masterï¼šå®˜æ–¹å«åšæ§åˆ¶å¹³é¢ï¼ˆControl Planeï¼‰ï¼Œå®ƒç”¨äºè´Ÿè´£æ•´ä¸ªé›†ç¾¤çš„ç®¡æ§ã€‚masterç”±4ä¸ªéƒ¨åˆ†ç»„æˆ</h4><ol><li>API Serverè¿›ç¨‹ï¼Œè´Ÿè´£ä»»ä½•èµ„æºçš„ç®¡ç†å’Œæ“ä½œ</li><li>etcdï¼Œç”¨äºä¿å­˜é›†ç¾¤çŠ¶æ€ï¼Œåªæœ‰apiServerå¯ä»¥è¯»å†™</li><li>è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰ï¼Œç”¨äºè°ƒåº¦Podèµ„æº</li><li>æ§åˆ¶å™¨ç®¡ç†å™¨ï¼ˆkube-controller-managerï¼‰</li></ol><h4 id="Nodeï¼šæ•°æ®å¹³é¢ï¼Œæ˜¯å®é™…çš„å·¥ä½œèŠ‚ç‚¹ï¼Œç›´æ¥è´Ÿè´£å¯¹å®¹å™¨çš„èµ„æºæ§åˆ¶ã€‚nodeç”±3ä¸ªéƒ¨åˆ†ç»„æˆ"><a href="#Nodeï¼šæ•°æ®å¹³é¢ï¼Œæ˜¯å®é™…çš„å·¥ä½œèŠ‚ç‚¹ï¼Œç›´æ¥è´Ÿè´£å¯¹å®¹å™¨çš„èµ„æºæ§åˆ¶ã€‚nodeç”±3ä¸ªéƒ¨åˆ†ç»„æˆ" class="headerlink" title="Nodeï¼šæ•°æ®å¹³é¢ï¼Œæ˜¯å®é™…çš„å·¥ä½œèŠ‚ç‚¹ï¼Œç›´æ¥è´Ÿè´£å¯¹å®¹å™¨çš„èµ„æºæ§åˆ¶ã€‚nodeç”±3ä¸ªéƒ¨åˆ†ç»„æˆ"></a>Nodeï¼šæ•°æ®å¹³é¢ï¼Œæ˜¯å®é™…çš„å·¥ä½œèŠ‚ç‚¹ï¼Œç›´æ¥è´Ÿè´£å¯¹å®¹å™¨çš„èµ„æºæ§åˆ¶ã€‚nodeç”±3ä¸ªéƒ¨åˆ†ç»„æˆ</h4><ol><li>kubeletï¼Œè¿è¡Œåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šé¢çš„ä»£ç†è¿›ç¨‹</li><li>kube-proxyï¼Œè´Ÿè´£æ¯ä¸ªèŠ‚ç‚¹çš„ç½‘ç»œæœåŠ¡</li><li>å®¹å™¨è¿è¡Œæ—¶ï¼Œä¾‹å¦‚docker</li></ol><h3 id="k8sè¿˜å®šä¹‰äº†ä¸€äº›å†…æ ¸æŠ½è±¡"><a href="#k8sè¿˜å®šä¹‰äº†ä¸€äº›å†…æ ¸æŠ½è±¡" class="headerlink" title="k8sè¿˜å®šä¹‰äº†ä¸€äº›å†…æ ¸æŠ½è±¡"></a>k8sè¿˜å®šä¹‰äº†ä¸€äº›å†…æ ¸æŠ½è±¡</h3><h4 id="1-Pod"><a href="#1-Pod" class="headerlink" title="1. Pod"></a>1. Pod</h4><p>Podæ˜¯k8sè°ƒåº¦çš„åŸºæœ¬å•å…ƒï¼Œå®ƒå°è£…äº†ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ã€‚Podä¸­çš„å®¹å™¨ä¼šä½œä¸ºä¸€ä¸ªæ•´ä½“è¢«k8sè°ƒåº¦åˆ°ä¸€ä¸ªNodeä¸Šè¿è¡Œã€‚åŒä¸€ä¸ªPodå†…çš„å®¹å™¨å¯ä»¥äº’ç›¸æ“ä½œå¯¹æ–¹çš„æ–‡ä»¶ï¼Œè¿™äº›å®¹å™¨å°±å¥½åƒè¿è¡Œåœ¨åŒä¸€ä¸ªæ“ä½œç³»ç»Ÿä¸Šçš„ä¸åŒè¿›ç¨‹ä¸€æ ·ã€‚</p><h4 id="2-æ§åˆ¶å™¨"><a href="#2-æ§åˆ¶å™¨" class="headerlink" title="2. æ§åˆ¶å™¨"></a>2. æ§åˆ¶å™¨</h4><p>ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·ä¸ä¼šç›´æ¥åˆ›å»ºPodï¼Œè€Œæ˜¯åˆ›å»ºæ§åˆ¶å™¨æ¥ç®¡ç†Podï¼Œå› ä¸ºæ§åˆ¶å™¨èƒ½å¤Ÿæ›´ç»†ç²’åº¦çš„æ§åˆ¶Podçš„è¿è¡Œæ–¹å¼ï¼Œæ¯”å¦‚å‰¯æœ¬æ•°é‡ã€éƒ¨ç½²ä½ç½®ç­‰ã€‚ æ§åˆ¶å™¨åŒ…å«ä¸‹é¢å‡ ç§ï¼š</p><ul><li>Replicationæ§åˆ¶å™¨ï¼ˆä»¥åŠReplicaSetæ§åˆ¶å™¨ï¼‰ï¼šè´Ÿè´£ä¿è¯Podå‰¯æœ¬æ•°é‡ç¬¦åˆé¢„æœŸï¼ˆæ¶‰åŠå¯¹Podçš„å¯åŠ¨ã€åœæ­¢ç­‰æ“ä½œï¼‰</li><li>Deploymentæ§åˆ¶å™¨ï¼šæ˜¯é«˜äºReplicationæ§åˆ¶å™¨çš„å¯¹è±¡ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æ§åˆ¶å™¨ï¼Œç”¨äºç®¡ç†Podçš„å‘å¸ƒã€æ›´æ–°ã€å›æ»šç­‰</li><li>StatefulSetæ§åˆ¶å™¨ï¼šä¸DeploymentåŒçº§ï¼Œæä¾›æ’åºå’Œå”¯ä¸€æ€§ä¿è¯çš„ç‰¹æ®ŠPodæ§åˆ¶å™¨ã€‚ç”¨äºç®¡ç†æœ‰çŠ¶æ€æœåŠ¡ï¼Œæ¯”å¦‚æ•°æ®åº“ç­‰</li><li>DaemonSetæ§åˆ¶å™¨ï¼šä¸DeploymentåŒçº§ï¼Œç”¨äºåœ¨é›†ç¾¤ä¸­çš„æ¯ä¸ªNodeä¸Šè¿è¡Œå•ä¸ªPodï¼Œå¤šç”¨äºæ—¥å¿—æ”¶é›†å’Œè½¬å‘ã€ç›‘æ§ç­‰åŠŸèƒ½çš„æœåŠ¡ã€‚å¹¶ä¸”å®ƒå¯ä»¥ç»•è¿‡å¸¸è§„Podæ— æ³•è°ƒåº¦åˆ°Masterè¿è¡Œçš„é™åˆ¶</li><li>Jobæ§åˆ¶å™¨ï¼šä¸DeploymentåŒçº§ï¼Œç”¨äºç®¡ç†ä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œæ¯”å¦‚æ‰¹å¤„ç†ä»»åŠ¡</li><li>CronJobæ§åˆ¶å™¨ï¼šä¸DeploymentåŒçº§ï¼Œåœ¨Jobæ§åˆ¶å™¨åŸºç¡€ä¸Šå¢åŠ äº†æ—¶é—´è°ƒåº¦ï¼Œç”¨äºæ‰§è¡Œå®šæ—¶ä»»åŠ¡</li></ul><h4 id="3-Serviceã€Ingresså’ŒStorage"><a href="#3-Serviceã€Ingresså’ŒStorage" class="headerlink" title="3. Serviceã€Ingresså’ŒStorage"></a>3. Serviceã€Ingresså’ŒStorage</h4><p>Serviceæ˜¯å¯¹ä¸€ç»„Podçš„æŠ½è±¡ï¼Œå®ƒå®šä¹‰äº†Podçš„é€»è¾‘é›†åˆä»¥åŠè®¿é—®è¯¥é›†åˆçš„ç­–ç•¥ã€‚å‰é¢çš„Deploymentç­‰æ§åˆ¶å™¨åªå®šä¹‰äº†Podè¿è¡Œæ•°é‡å’Œç”Ÿå‘½å‘¨æœŸï¼Œ å¹¶æ²¡æœ‰å®šä¹‰å¦‚ä½•è®¿é—®è¿™äº›Podï¼Œç”±äºPodé‡å¯åIPä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ²¡æœ‰å›ºå®šIPå’Œç«¯å£æä¾›æœåŠ¡ã€‚<br>Serviceå¯¹è±¡å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚Serviceå¯ä»¥è‡ªåŠ¨è·Ÿè¸ªå¹¶ç»‘å®šåç«¯æ§åˆ¶å™¨ç®¡ç†çš„å¤šä¸ªPodï¼Œå³ä½¿å‘ç”Ÿé‡å¯ã€æ‰©å®¹ç­‰äº‹ä»¶ä¹Ÿèƒ½è‡ªåŠ¨å¤„ç†ï¼Œ åŒæ—¶æä¾›ç»Ÿä¸€IPä¾›å‰ç«¯è®¿é—®ï¼Œæ‰€ä»¥é€šè¿‡Serviceå°±å¯ä»¥è·å¾—æœåŠ¡å‘ç°çš„èƒ½åŠ›ï¼Œéƒ¨ç½²å¾®æœåŠ¡æ—¶å°±æ— éœ€å•ç‹¬éƒ¨ç½²æ³¨å†Œä¸­å¿ƒç»„ä»¶ã€‚<br>Ingressä¸æ˜¯ä¸€ç§æœåŠ¡ç±»å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªè·¯ç”±è§„åˆ™é›†åˆï¼Œé€šè¿‡Ingressè§„åˆ™å®šä¹‰çš„è§„åˆ™ï¼Œå¯ä»¥å°†å¤šä¸ªServiceç»„åˆæˆä¸€ä¸ªè™šæ‹ŸæœåŠ¡ï¼ˆå¦‚å‰ç«¯é¡µé¢+åç«¯APIï¼‰ã€‚ å®ƒå¯å®ç°ä¸šåŠ¡ç½‘å…³çš„ä½œç”¨ï¼Œç±»ä¼¼Nginxçš„ç”¨æ³•ï¼Œå¯ä»¥å®ç°è´Ÿè½½å‡è¡¡ã€SSLå¸è½½ã€æµé‡è½¬å‘ã€æµé‡æ§åˆ¶ç­‰åŠŸèƒ½ã€‚<br>Storageæ˜¯Podä¸­ç”¨äºå­˜å‚¨çš„æŠ½è±¡ï¼Œå®ƒå®šä¹‰äº†Podçš„å­˜å‚¨å·ï¼ŒåŒ…æ‹¬æœ¬åœ°å­˜å‚¨å’Œç½‘ç»œå­˜å‚¨ï¼›å®ƒçš„ç”Ÿå‘½å‘¨æœŸç‹¬ç«‹äºPodä¹‹å¤–ï¼Œå¯è¿›è¡Œå•ç‹¬æ§åˆ¶ã€‚</p><h4 id="4-èµ„æºåˆ’åˆ†"><a href="#4-èµ„æºåˆ’åˆ†" class="headerlink" title="4. èµ„æºåˆ’åˆ†"></a>4. èµ„æºåˆ’åˆ†</h4><p>å‘½åç©ºé—´ï¼ˆNamespaceï¼‰ï¼šk8sé€šè¿‡namespaceå¯¹åŒä¸€å°ç‰©ç†æœºä¸Šçš„k8sèµ„æºè¿›è¡Œé€»è¾‘éš”ç¦»ã€‚<br>æ ‡ç­¾ï¼ˆLabelsï¼‰ï¼šæ˜¯ä¸€ç§è¯­ä¹‰åŒ–æ ‡è®°ï¼Œå¯ä»¥é™„åŠ åˆ°Podã€Nodeç­‰å¯¹è±¡ä¹‹ä¸Šï¼Œç„¶åæ›´é«˜çº§çš„å¯¹è±¡å¯ä»¥åŸºäºæ ‡ç­¾å¯¹å®ƒä»¬è¿›è¡Œç­›é€‰å’Œè°ƒç”¨ï¼Œ ä¾‹å¦‚Serviceå¯ä»¥å°†è¯·æ±‚åªè·¯ç”±åˆ°æŒ‡å®šæ ‡ç­¾çš„Podï¼Œæˆ–è€…Deploymentå¯ä»¥å°†Podåªè°ƒåº¦åˆ°æŒ‡å®šæ ‡ç­¾çš„Nodeã€‚<br>æ³¨è§£ï¼ˆAnnotationsï¼‰ï¼šä¹Ÿæ˜¯é”®å€¼å¯¹æ•°æ®ï¼Œä½†æ›´çµæ´»ï¼Œå®ƒçš„valueå…è®¸åŒ…å«ç»“æ„åŒ–æ•°æ®ã€‚ä¸€èˆ¬ç”¨äºå…ƒæ•°æ®é…ç½®ï¼Œä¸ç”¨äºç­›é€‰ã€‚ ä¾‹å¦‚Ingressä¸­é€šè¿‡æ³¨è§£ä¸ºnginxæ§åˆ¶å™¨é…ç½®ç¦ç”¨sslé‡å®šå‘ã€‚</p><h2 id="k8sçš„å®‰è£…"><a href="#k8sçš„å®‰è£…" class="headerlink" title="k8sçš„å®‰è£…"></a>k8sçš„å®‰è£…</h2><p>k8sçš„å®‰è£…æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦æ¶‰åŠåˆ°å¾ˆå¤šçš„Linuxã€ç½‘ç»œã€å­˜å‚¨ç­‰è®¾ç½®ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å…ˆå­¦ä¹ ä½¿ç”¨minikubeå®‰è£…å•æœºçš„k8sç¯å¢ƒï¼Œç­‰å­¦ä¹ å¹¶ç†Ÿæ‚‰äº†k8sçš„ä½¿ç”¨ä¹‹åï¼Œå†å»æ­å»ºk8sçš„é›†ç¾¤ç¯å¢ƒã€‚</p><h3 id="å®‰è£…kubectl"><a href="#å®‰è£…kubectl" class="headerlink" title="å®‰è£…kubectl"></a>å®‰è£…kubectl</h3><p>kubectlæ˜¯k8sçš„å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒå’Œk8sçš„æœåŠ¡è¿›è¡Œäº¤äº’ï¼Œæˆ‘ä»¬ç›´æ¥ä»k8sçš„å®˜ç½‘ä¸Šä¸‹è½½å®ƒå¹¶å°†å…¶å®‰è£…åˆ°<code>/usr/local/bin</code>ç›®å½•ä¸‹</p><pre><code># ä¸‹è½½kubectlå®¢æˆ·ç«¯ï¼Œè¿™é‡Œä½¿ç”¨äº†ä»£ç†
curl -LO &quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl&quot; -x http://192.168.65.100:7890
# å°†kubectlå®¢æˆ·ç«¯å®‰è£…åˆ°æŒ‡å®šçš„binç›®å½•ä¸‹
sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl
</code></pre><p>ä¸ºäº†æ–¹ä¾¿åé¢çš„ä½¿ç”¨ï¼Œå¯ä»¥å°†<code>kc</code>è®¾ç½®ä¸º<code>kubectl</code>çš„åˆ«åï¼Œå°†å¦‚ä¸‹é…ç½®æ·»åŠ åˆ°<code>~/.zshrc</code>æ–‡ä»¶ä¸­</p><pre><code>alias kc=&quot;kubectl&quot;
</code></pre><p>ä¹‹åæˆ‘ä»¬å°±å¯ä»¥æŸ¥çœ‹kubectlçš„ç‰ˆæœ¬äº†</p><pre><code>~ kc version --client --output=json
&#123;
    &quot;clientVersion&quot;: &#123;
        &quot;major&quot;: &quot;1&quot;,
        &quot;minor&quot;: &quot;29&quot;,
        &quot;gitVersion&quot;: &quot;v1.29.0&quot;,
        &quot;gitCommit&quot;: &quot;3f7a50f38688eb332e2a1b013678c6435d539ae6&quot;,
        &quot;gitTreeState&quot;: &quot;clean&quot;,
        &quot;buildDate&quot;: &quot;2023-12-13T08:51:44Z&quot;,
        &quot;goVersion&quot;: &quot;go1.21.5&quot;,
        &quot;compiler&quot;: &quot;gc&quot;,
        &quot;platform&quot;: &quot;linux/amd64&quot;
    &#125;,
    &quot;kustomizeVersion&quot;: &quot;v5.0.4-0.20230601165947-6ce0bf390ce3&quot;
&#125;
</code></pre><h3 id="å®‰è£…Docker"><a href="#å®‰è£…Docker" class="headerlink" title="å®‰è£…Docker"></a>å®‰è£…Docker</h3><p>Dockerçš„å®‰è£…å‚è€ƒäº†<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/ubuntu/">å®˜æ–¹æ–‡æ¡£</a>ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹</p><p>æ·»åŠ Dockerçš„å®˜æ–¹GPGç§˜é’¥</p><pre><code>sudo apt-get update
sudo apt-get install ca-certificates curl gnupg
sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg
</code></pre><p>æŠŠä»“åº“æ·»åŠ åˆ°aptçš„èµ„æºåˆ—è¡¨ä¸­</p><pre><code>echo \
&quot;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
$(. /etc/os-release &amp;&amp; echo &quot;$VERSION_CODENAME&quot;) stable&quot; | \
sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
sudo apt-get update
</code></pre><p>å®‰è£…ç›¸å…³çš„ç¨‹åºå¹¶è¿›è¡Œæƒé™è®¾ç½®</p><pre><code># å®‰è£…ç¨‹åº
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
# è®¾ç½®æ–‡ä»¶æƒé™ï¼Œå¹¶æŠŠå½“å‰ç”¨æˆ·æ·»åŠ åˆ°dockerç»„ä¸­
sudo chmod 666 /var/run/docker.sock
sudo usermod -aG docker $USER
</code></pre><p>å®‰è£…å¥½äº†Dockerå¹¶è®¾ç½®å®Œæƒé™ä¹‹åï¼Œå¯ä»¥æ‰§è¡ŒDockerçš„hello-worldæŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸäº†</p><pre><code>docker run hello-world
</code></pre><p>å®‰è£…æˆåŠŸçš„è¾“å‡ºå¦‚ä¸‹</p><pre><code>Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
    1. The Docker client contacted the Docker daemon.
    2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
        (amd64)
    3. The Docker daemon created a new container from that image which runs the
        executable that produces the output you are currently reading.
    4. The Docker daemon streamed that output to the Docker client, which sent it
        to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
    $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
    https://hub.docker.com/

For more examples and ideas, visit:
    https://docs.docker.com/get-started/
</code></pre><h3 id="å®‰è£…minikube"><a href="#å®‰è£…minikube" class="headerlink" title="å®‰è£…minikube"></a>å®‰è£…minikube</h3><p>ä¸kubectlçš„å®‰è£…ç±»ä¼¼ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨ä¸‹è½½å¹¶å®‰è£…çš„æ–¹å¼å®‰è£…minikube</p><pre><code># ä¸‹è½½
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
# å®‰è£…åˆ°æŒ‡å®šç›®å½•ä¸‹é¢
sudo install minikube-linux-amd64 /usr/local/bin/minikube
</code></pre><p>å®‰è£…ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯åŠ¨minikubeäº†ã€‚å› ä¸ºç½‘ç»œåŸå› ï¼Œç›´æ¥ä½¿ç”¨<code>minikube start</code>å‘½ä»¤æœ‰çš„æ—¶å€™æ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»£ç†</p><pre><code>~ minikube start http_proxy=http://192.168.65.100:7890 https_proxy=http://192.168.65.100:7890
ğŸ˜„  minikube v1.32.0 on Ubuntu 22.04
âœ¨  Using the docker driver based on existing profile
ğŸ‘  Starting control plane node minikube in cluster minikube
ğŸšœ  Pulling base image ...
ğŸ”„  Restarting existing docker container for &quot;minikube&quot; ...
ğŸ³  Preparing Kubernetes v1.28.3 on Docker 24.0.7 ...
ğŸ”—  Configuring bridge CNI (Container Networking Interface) ...
ğŸ”  Verifying Kubernetes components...
    â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5
ğŸŒŸ  Enabled addons: default-storageclass, storage-provisioner
ğŸ„  Done! kubectl is now configured to use &quot;minikube&quot; cluster and &quot;default&quot; namespace by default
</code></pre><p>çœ‹åˆ°ä»¥ä¸Šå†…å®¹ï¼Œåˆ™è¯´æ˜k8så·²ç»å¯åŠ¨å¥½äº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨kubectlæ¥ç®¡ç†k8säº†</p><p>æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯</p><pre><code>~ kc version
Client Version: v1.29.0
Kustomize Version: v5.0.4-0.20230601165947-6ce0bf390ce3
Server Version: v1.28.3
</code></pre><p>æŸ¥çœ‹k8sé›†ç¾¤ä¿¡æ¯</p><pre><code>~ kc cluster-info
Kubernetes control plane is running at https://192.168.49.2:8443
CoreDNS is running at https://192.168.49.2:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

To further debug and diagnose cluster problems, use &#39;kubectl cluster-info dump&#39;.
</code></pre><p>æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯</p><pre><code>~ kc get nodes
NAME       STATUS   ROLES           AGE     VERSION
minikube   Ready    control-plane   4h48m   v1.28.3
</code></pre><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a target="_blank" rel="noopener" href="https://www.aneasystone.com/archives/2022/05/install-kubernetes.html">Kubernetes å®‰è£…å°è®°</a><br><a target="_blank" rel="noopener" href="https://www.aneasystone.com/archives/2022/06/playing-with-kubernetes.html">Kubernetes ä½¿ç”¨å°è®°</a><br><a target="_blank" rel="noopener" href="https://github.com/chaseSpace/k8s-tutorial-cn/blob/main/doc_tutorial.md">Kubernetes åŸºç¡€æ•™ç¨‹</a><br><a target="_blank" rel="noopener" href="https://github.com/jaywcjlove/docker-tutorial">Docker å…¥é—¨æ•™ç¨‹</a></p></div><div class="post-copyright"><div><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong> <span title="Kubernetesçš„å®‰è£…å’Œä½¿ç”¨ï¼ˆä¸€ï¼‰">https://www.nosuchfield.com/2022/10/30/Kubernetes-installation-and-use-1/</span></div><div><strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« å‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</div></div><style>summary{cursor:pointer;margin-bottom:10px}summary:focus{outline:0}</style><script src="/js/code-enhancer.js"></script><script src="/js/pangu.min.js"></script><script>pangu.spacingPage()</script><script>function backToTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script defer src="https://cloud.umami.is/script.js" data-website-id="267e4aaf-8cb5-464d-b16c-89e66283e505"></script><div class="post-footer"><ul class="post-tag-list" itemprop="keywords"><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/k8s/" rel="tag">k8s</a></li><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/" rel="tag">äº‘åŸç”Ÿ</a></li><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/%E8%BF%90%E7%BB%B4/" rel="tag">è¿ç»´</a></li></ul><span onclick="backToTop()" class="top">è¿”å›é¡¶éƒ¨</span></div></article><footer><span>&copy; 2015 - 2025</span> <span class="author">Raymond</span> <span style="float:right"><span class="upyun">æœ¬ç½‘ç«™ç”±<a target="_blank" rel="noopener" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"> <img src="/images/others/upyun.png"></a>æä¾›CDNåŠ é€Ÿ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <a class="filing" href="https://beian.miit.gov.cn/" target="_blank">è‹ICPå¤‡15057335å·</a> <a class="github" href="https://github.com/RitterHou" target="_blank">GitHub</a></span></footer></div></body></html>