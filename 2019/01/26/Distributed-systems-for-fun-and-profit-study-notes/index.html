<!DOCTYPE html><html lang="zh-Hans"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title>【读书笔记】Distributed systems for fun and profit - 侯锐的思考与分享</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><meta name="keywords" content="分布式系统"><meta name="description" content="&lt;blockquote&gt;
&lt;p&gt;本文是 &lt;a href=&#34;http://book.mixu.net/distsys/index.html&#34;&gt;Distributed systems for fun and profit&lt;/a&gt; 的读书笔记。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;第一章&#34;&gt;&lt;a href=&#34;#第一章&#34; class=&#34;headerlink&#34; title=&#34;第一章&#34;&gt;&lt;/a&gt;第一章&lt;/h3&gt;&lt;p&gt;任何计算机系统都需要解决的两个基本问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;存储&lt;/li&gt;
&lt;li&gt;计算&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;分布式系统的优势：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;可扩展性，可以随着规模增长提升系统的计算、存储、网络等等的资源&lt;/li&gt;
&lt;li&gt;高性能，包括&lt;strong&gt;快速响应时间&lt;/strong&gt;、高吞吐量和高效的计算机资源的使用&lt;/li&gt;
&lt;li&gt;高可用性（容错），考虑到可能发生的错误并且设计相应的的系统或算法来容忍这种错误，你无法为你未考虑到的场景做容错&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;分布式系统的物理限制：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;节点数量&lt;/li&gt;
"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="侯锐的思考与分享" type="application/atom+xml"></head><body><div class="container"><header class="header"><div class="blog-title"><a href="/" class="logo">侯锐的思考与分享</a><div class="subtitle"></div></div><nav class="navbar"><ul class="menu"><li class="menu-item"><a href="/" class="menu-item-link" data-no-instant>主页</a></li><li class="menu-item"><a href="/atom.xml" class="menu-item-link" data-no-instant>订阅</a></li><li class="menu-item"><a href="/search" class="menu-item-link" data-no-instant>搜索</a></li></ul></nav></header><article class="post"><div class="post-title"><h1 class="article-title">【读书笔记】Distributed systems for fun and profit</h1></div><div class="post-meta"><span class="post-time">2019-01-26</span></div><div class="post-content"><blockquote><p>本文是 <a target="_blank" rel="noopener" href="http://book.mixu.net/distsys/index.html">Distributed systems for fun and profit</a> 的读书笔记。</p></blockquote><h3 id="第一章"><a href="#第一章" class="headerlink" title="第一章"></a>第一章</h3><p>任何计算机系统都需要解决的两个基本问题：</p><ul><li>存储</li><li>计算</li></ul><p>分布式系统的优势：</p><ul><li>可扩展性，可以随着规模增长提升系统的计算、存储、网络等等的资源</li><li>高性能，包括<strong>快速响应时间</strong>、高吞吐量和高效的计算机资源的使用</li><li>高可用性（容错），考虑到可能发生的错误并且设计相应的的系统或算法来容忍这种错误，你无法为你未考虑到的场景做容错</li></ul><p>分布式系统的物理限制：</p><ul><li>节点数量</li><li>节点之间的距离</li></ul><p>分布式系统中常用的设计技巧：</p><ul><li>分区（partition）</li><li>备份（replicate）</li></ul><h3 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h3><p><strong>系统模型</strong>是对分布式系统的抽象，如何才能构建一个系统模型呢？</p><p>存在的问题：</p><ul><li>节点，节点可能发生crash</li><li>连接，连接随时都可能发生断开</li><li>时序，在分布式系统中由于没有统一的时钟，所以节点之间无法正常的同步（Lamport timestamps）<ul><li>同步系统模型：</li><li>异步系统模型：</li></ul></li></ul><p>FLP理论。FLP理论告诉我们，想要设计一个完全正确的分布式系统模型是不可能的。<br>CAP理论。在设计分布式系统的时候，需要参考CAP理论，根据不同的侧重使用不同的设计：</p><ul><li>可用性，即需要能够向外提供服务</li><li>分区容错性，分布式系统需要分区和容错</li><li>数据（强）一致性：多种一致性模型，包括很多强一致性模型和弱一致性模型。</li></ul><p>ACID和BASE代表了两种截然相反的设计哲学，它们都是一种分布式系统的设计方式。而Paxos和Raft都是为了解决这个问题而作出的努力，它们都是一种<strong>十分具体</strong>的设计方式。</p><h3 id="第三章：时序（Time-and-order）问题"><a href="#第三章：时序（Time-and-order）问题" class="headerlink" title="第三章：时序（Time and order）问题"></a>第三章：时序（Time and order）问题</h3><p>因为物理时钟无法再使用，我们需要使用逻辑时钟：</p><ul><li>Lamport clocks（Raft算法中日志同步好像用的就是这种算法？）</li><li>vector clocks：Lamport clocks的扩展</li></ul><h3 id="第四章：复制-强一致性"><a href="#第四章：复制-强一致性" class="headerlink" title="第四章：复制(强一致性)"></a>第四章：复制(强一致性)</h3><p>复制（replication）</p><ul><li>同步复制，一旦某个节点出现问题，可能导致整个系统不可用</li><li>异步复制，有可能导致数据丢失，或者在多个节点上数据读取结果不一致</li></ul><p>复制算法：</p><ul><li>Primary&#x2F;backup Replication</li><li>2PC</li><li>3PC</li><li>Paxos</li><li>Raft</li><li>ZAB</li></ul><h3 id="第五章：复制（最终一致性）"><a href="#第五章：复制（最终一致性）" class="headerlink" title="第五章：复制（最终一致性）"></a>第五章：复制（最终一致性）</h3><p>最终一致性</p><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/bangerlee/p/6216997.html">https://www.cnblogs.com/bangerlee/p/6216997.html</a></p><h3 id="以下为一些思考或总结的内容"><a href="#以下为一些思考或总结的内容" class="headerlink" title="以下为一些思考或总结的内容"></a>以下为一些思考或总结的内容</h3><p>为什么要使用分布式系统：如果只有一台负载，存在着问题，无法高可用、高性能、高可扩展性</p><p>分布式系统会产生多个节点：</p><ul><li>通过节点完整数据复制的方式：不是不可以，而是不够灵活，且数据恢复时浪费带宽</li><li>基于分片和备份的方式管理数据（使用何种策略产生分片和备份？副本的管理机制：中心化 || 去中心化？），系统成为分布式的。</li></ul><p>分布式会引入几个问题：节点、网络 crash、时序问题，解决这些问题？</p><ul><li>副本协议（使用何种策略拆分和管理副本）</li><li>租约机制（lease）</li><li>选举机制（quorum）（节点、副本）</li><li>日志技术</li><li>两阶段、三阶段提交</li><li>分布式一致性协议。。。</li></ul><p>中心化的选举：直接由master指定某一个副本（或节点）为Primary，通过lease管理，Primary需要不断地告诉master自己还活着<br>去中心化的选举：Raft协议，选举前是去中心化的，选举结束后整个系统是一个中心化的系统，master管理整个系统</p><p>如何实现高可用（使用同质的服务）：</p><ul><li><p>主备（fail over）：如果涉及到数据则备机还需要备份同步master的数据</p></li><li><p>负载均衡（load balance）</p></li><li><p>传统数据库的扩容：同构系统</p></li><li><p>大规模存储系统的可扩展性：异构系统（存储节点和负载之间是异构的，其实就是副本的概念，异构系统带来更高的数据同步和扩容效率）</p></li></ul><p>副本数据在备份时，需要保证一定的一致性，即<strong>原始数据到备份数据之间的一致性</strong></p><p>一些常用的思想：</p><ul><li>多数派(quorum)的思路帮助我们在网络分化的情况下达成决议一致性，在leader选举的场景下帮助我们选出唯一leader</li><li>租约(lease)在一定期限内给予节点特定权利，也可以用于实现leader选举</li></ul><h3 id="参考-1"><a href="#参考-1" class="headerlink" title="参考"></a>参考</h3><p><a target="_blank" rel="noopener" href="http://blog.sciencenet.cn/home.php?mod=attachment&id=31413">分布式系统原理介绍 - 刘杰</a><br><a target="_blank" rel="noopener" href="https://book.douban.com/subject/25723658/">大规模分布式存储系统：原理解析与架构实战 - 杨传辉</a></p></div><div class="post-copyright"><div><strong>本文链接：</strong> <span title="【读书笔记】Distributed systems for fun and profit">https://www.nosuchfield.com/2019/01/26/Distributed-systems-for-fun-and-profit-study-notes/</span></div><div><strong>版权声明： </strong>本博客所有文章均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处！</div></div><style>summary{cursor:pointer;margin-bottom:10px}summary:focus{outline:0}</style><script src="/js/code-enhancer.js"></script><script src="/js/pangu.min.js"></script><script>pangu.spacingPage()</script><script>function backToTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script defer src="https://cloud.umami.is/script.js" data-website-id="267e4aaf-8cb5-464d-b16c-89e66283e505"></script><div class="post-footer"><ul class="post-tag-list" itemprop="keywords"><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/" rel="tag">分布式系统</a></li></ul><span onclick="backToTop()" class="top">返回顶部</span></div></article><footer><span>&copy; 2015 - 2025</span> <span class="author">Raymond</span> <span style="float:right"><span class="upyun">本网站由<a target="_blank" rel="noopener" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"> <img src="/images/others/upyun.png"></a>提供CDN加速&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <a class="filing" href="https://beian.miit.gov.cn/" target="_blank">苏ICP备15057335号</a> <a class="github" href="https://github.com/RitterHou" target="_blank">GitHub</a></span></footer></div></body></html>