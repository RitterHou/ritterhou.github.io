<!DOCTYPE html><html lang="zh-Hans"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title>ComfyUI的操作与使用 - 侯锐的思考与分享</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><meta name="keywords" content="机器学习,ComfyUI,AI,图像生成,Stable" diffusion><meta name="description" content="&lt;p&gt;&lt;em&gt;简单起见，又或者是没有N卡或者显卡的配置比较低，可以使用&lt;a href=&#34;https://console.cloud.tencent.com/hai&#34;&gt;腾讯云HAI&lt;/a&gt;直接搭建ComfyUI服务。&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&#34;入门使用&#34;&gt;&lt;a href=&#34;#入门使用&#34; class=&#34;headerlink&#34; title=&#34;入门使用&#34;&gt;&lt;/a&gt;入门使用&lt;/h3&gt;&lt;p&gt;可以先clear掉当前的workflow，之后右键新建模块。&lt;/p&gt;
&lt;p&gt;首先需要新建一个采样器（KSampler），采样器的配置如下：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;参数&lt;/th&gt;
&lt;th&gt;值&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;seed&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;随机种子，控制生成结果的随机性。相同种子会产生相同结果&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;control_after_generate&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;rando"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="侯锐的思考与分享" type="application/atom+xml"></head><body><div class="container"><header class="header"><div class="blog-title"><a href="/" class="logo">侯锐的思考与分享</a><div class="subtitle"></div></div><nav class="navbar"><ul class="menu"><li class="menu-item"><a href="/" class="menu-item-link" data-no-instant>主页</a></li><li class="menu-item"><a href="/atom.xml" class="menu-item-link" data-no-instant>订阅</a></li><li class="menu-item"><a href="/search" class="menu-item-link" data-no-instant>搜索</a></li></ul></nav></header><article class="post"><div class="post-title"><h1 class="article-title">ComfyUI的操作与使用</h1></div><div class="post-meta"><span class="post-time">2025-03-31</span></div><div class="post-content"><p><em>简单起见，又或者是没有N卡或者显卡的配置比较低，可以使用<a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/hai">腾讯云HAI</a>直接搭建ComfyUI服务。</em></p><h3 id="入门使用"><a href="#入门使用" class="headerlink" title="入门使用"></a>入门使用</h3><p>可以先clear掉当前的workflow，之后右键新建模块。</p><p>首先需要新建一个采样器（KSampler），采样器的配置如下：</p><table><thead><tr><th>参数</th><th>值</th><th>说明</th></tr></thead><tbody><tr><td><strong>seed</strong></td><td>0</td><td>随机种子，控制生成结果的随机性。相同种子会产生相同结果</td></tr><tr><td><strong>control_after_generate</strong></td><td>randomize</td><td>生成后种子控制方式：randomize(随机化)、increment(递增)、decrement(递减)、fixed(固定)</td></tr><tr><td><strong>steps</strong></td><td>20</td><td>采样步数，通常15-30步较为合适。步数越多质量越好但耗时更长</td></tr><tr><td><strong>cfg</strong></td><td>8.000</td><td>CFG引导强度，控制AI对提示词的遵循程度。范围1-20，推荐7-12</td></tr><tr><td><strong>sampler_name</strong></td><td>euler</td><td>采样算法：euler、euler_a、dpm_2、dpm_2_ancestral、lms、ddim等</td></tr><tr><td><strong>scheduler</strong></td><td>normal</td><td>调度器类型：normal、karras、exponential、sgm_uniform等</td></tr><tr><td><strong>denoise</strong></td><td>1.000</td><td>去噪强度，1.0为完全去噪，0.0为不去噪。图生图时可调节此值</td></tr></tbody></table><p>采样器的model可以选择Load Checkpoint。<br>positive是正向提示词，negative是反向提示词，都可以选择CLIPTextEncode。为了方便区分，可以给prompt修改一个有意义的标题。<br>latent_image可以设置图片的选项，例如EmptyLatentImage。<br>LATENT可以选择VAE Decode模块，然后可以添加一个图片预览模块。</p><h3 id="多图合并，使用同一个背景"><a href="#多图合并，使用同一个背景" class="headerlink" title="多图合并，使用同一个背景"></a>多图合并，使用同一个背景</h3><p>输出大小设置为图片背景总大小。<br>图片正向prompt输出拖拽，然后添加Conditioning(Set Area)节点，在其中设置图片的大小和图片在背景画布中的位置。<br>使用ConditioningCombine节点，合并多个Conditioning节点，之后把合并节点的输出连接到KSample。<br>但是，如果是单纯两个prompt直接连到采样器，两张图片会很割裂。解决办法是再新建一个prompt，之后把两张图片的输出和这个prompt使用一个combine进行合并，之后合并结果再输出到采样器。</p><h3 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h3><p><strong>CheckPoints（检查点模型）</strong>是Stable Diffusion的核心基础模型，包含了完整的图像生成能力。它是一个预训练的神经网络模型，决定了生成图像的整体风格、质量和特征。</p><h4 id="常用CheckPoints模型类型："><a href="#常用CheckPoints模型类型：" class="headerlink" title="常用CheckPoints模型类型："></a>常用CheckPoints模型类型：</h4><table><thead><tr><th>模型类型</th><th>特点</th><th>适用场景</th><th>推荐模型</th></tr></thead><tbody><tr><td><strong>SD 1.5系列</strong></td><td>经典基础模型，兼容性好</td><td>入门学习，插件丰富</td><td><code>v1-5-pruned-emaonly.ckpt</code></td></tr><tr><td><strong>SDXL系列</strong></td><td>更高分辨率，质量更好</td><td>高质量出图</td><td><code>sd_xl_base_1.0.safetensors</code></td></tr><tr><td><strong>写实人像</strong></td><td>专注真实人物生成</td><td>人像摄影、写实风格</td><td><code>realisticVisionV60B1_v51VAE.safetensors</code></td></tr><tr><td><strong>动漫二次元</strong></td><td>卡通动漫风格</td><td>动漫插画、角色设计</td><td><code>anything-v5-PrtRE.safetensors</code></td></tr><tr><td><strong>艺术绘画</strong></td><td>艺术风格强烈</td><td>创意艺术、概念设计</td><td><code>dreamshaper_8.safetensors</code></td></tr><tr><td><strong>建筑风景</strong></td><td>专注场景和建筑</td><td>建筑设计、风景画</td><td><code>architectureExterior_v40.safetensors</code></td></tr></tbody></table><p>模型文件格式：<code>.ckpt</code>：早期格式，文件较大；<code>.safetensors</code>：更安全的格式，加载速度快，推荐使用；<code>.pt</code>：PyTorch原生格式</p><p>使用LoRA模型：在主模型的MODEL节点拖拽，可以新增LoRA节点，之后把LoRA的模型替代主模型连接到采样器上面。同样的，主模型的CLIP需要连接到LoRA上面，之后把正向prompt连接到LoRA就可以了（反向prompt还是连接在CheckPoint的CLIP上面）。</p><p>LoRA和Checkpoint的定义区别如下</p><table><thead><tr><th>名称</th><th>定义</th></tr></thead><tbody><tr><td><strong>Checkpoint</strong></td><td>模型的权重文件，是模型在某个训练时刻的完整状态的保存，通常包括整个模型的参数、优化器状态等。</td></tr><tr><td><strong>LoRA（Low-Rank Adaptation）</strong></td><td>一种参数高效的微调方法，不直接修改原始模型参数，而是在模型某些层中引入少量可训练参数，从而在不改变大模型主体的前提下实现微调。</td></tr></tbody></table><p>它们有着各自不同的使用目的</p><table><thead><tr><th>比较项</th><th>Checkpoint</th><th>LoRA</th></tr></thead><tbody><tr><td>目标</td><td>保存和恢复训练过程或完整模型</td><td>节省参数、内存，快速高效地微调大模型</td></tr><tr><td>应用场景</td><td>模型训练中断恢复、部署模型</td><td>微调大语言模型、个性化调整、插件式部署</td></tr><tr><td>文件大小</td><td>通常非常大（几百MB到几十GB）</td><td>非常小（几MB到几十MB）</td></tr></tbody></table><h3 id="实际操作"><a href="#实际操作" class="headerlink" title="实际操作"></a>实际操作</h3><p>首先我们打开腾讯云的HAI界面，并新建一个ComfyUI的服务</p><p><img src="/images/20250603/1.webp"></p><p>服务创建好了之后我们打开对应的ComfyUI服务地址，可以看到如下界面</p><p><img src="/images/20250603/4.webp"></p><p>这里我们禁用掉新版UI，并且安装Crystools节点</p><p><img src="/images/20250603/5.webp"></p><p><img src="/images/20250603/6.webp"></p><p>之后我们可以看到界面会变成如下样式</p><p><img src="/images/20250603/7.webp"></p><p>随后我们下载并安装realisticVision模型</p><p><img src="/images/20250603/3.webp"></p><p>创建好服务的密码等信息会通过站内信的方式进行发送，可以使用这些信息登录到机器上，之后在机器上面下载realisticVision模型</p><p><img src="/images/20250603/14.webp"></p><p>在<code>ComfyUI/models/checkpoints/</code>文件夹里面下载该模型</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(base) root@VM-0-5-ubuntu:~# cd ComfyUI/models/checkpoints/</span><br><span class="line">(base) root@VM-0-5-ubuntu:~/ComfyUI/models/checkpoints# wget &#x27;https://huggingface.co/moiu2998/mymo/resolve/3c3093fa083909be34a10714c93874ce5c9dabc4/realisticVisionV60B1_v51VAE.safetensors&#x27;</span><br><span class="line">--2025-06-03 02:31:39--  https://huggingface.co/moiu2998/mymo/resolve/3c3093fa083909be34a10714c93874ce5c9dabc4/realisticVisionV60B1_v51VAE.safetensors</span><br><span class="line">Resolving huggingface.co (huggingface.co)... 3.164.110.3, 3.164.110.114, 3.164.110.77, ...</span><br><span class="line">Connecting to huggingface.co (huggingface.co)|3.164.110.3|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 302 Found</span><br><span class="line">...</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 4265096996 (4.0G) [binary/octet-stream]</span><br><span class="line">Saving to: &#x27;realisticVisionV60B1_v51VAE.safetensors&#x27;</span><br><span class="line"></span><br><span class="line">realisticVisionV60B1_v51VAE.safetensors                   100%[=====================================================================================================================================&gt;]   3.97G  11.3MB/s    in 5m 57s  </span><br><span class="line"></span><br><span class="line">2025-06-03 02:37:35 (11.4 MB/s) - &#x27;realisticVisionV60B1_v51VAE.safetensors&#x27; saved [4265096996/4265096996]</span><br></pre></td></tr></table></figure><p>之后点击Refresh按钮，可以在checkpoint节点里面看到我们刚刚下载的模型</p><p><img src="/images/20250603/8.webp"></p><p>我们使用这个模型根据一些prompt可以生成一张福特福克斯的图片</p><p><img src="/images/20250603/9.webp"></p><p>刚刚我们的模型是在huggingface上面下载的，civitai同样也可以下载模型</p><p><img src="/images/20250603/10.webp"></p><p>使用命令下载civitai的模型，这里需要注册账号生成token并把token填入到下载链接中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(base) root@VM-0-5-ubuntu:~/ComfyUI/models/checkpoints# wget --content-disposition &#x27;https://civitai.com/api/download/models/501240?type=Model&amp;format=SafeTensor&amp;size=pruned&amp;fp=fp16&amp;token=$&#123;API_TOKEN&#125;&#x27;</span><br><span class="line">...</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 2132625894 (2.0G)</span><br><span class="line">Saving to: &#x27;realisticVisionV60B1_v51HyperVAE.safetensors&#x27;</span><br><span class="line"></span><br><span class="line">realisticVisionV60B1_v51HyperVAE.safetensors              100%[=====================================================================================================================================&gt;]   1.99G  11.5MB/s    in 2m 59s  </span><br><span class="line"></span><br><span class="line">2025-06-03 02:54:00 (11.3 MB/s) - &#x27;realisticVisionV60B1_v51HyperVAE.safetensors&#x27; saved [2132625894/2132625894]</span><br></pre></td></tr></table></figure><p>刷新之后同样可以看到新的模型信息</p><p><img src="/images/20250603/11.webp"></p><p>之后我们使用civitai上面的推荐配置</p><p><img src="/images/20250603/13.webp"></p><p>使用推荐配置即可生成相似的图片</p><p><img src="/images/20250603/12.webp"></p><p>实际生成的图片如下，ComfyUI生成的图片会包含生成图片时用到的整个工作流，如果需要使用相同的工作流只需要在ComfyUI中导入该图片即可</p><p><img src="/images/20250603/16.png"></p><p>如上图片的信息如下</p><p>prompt</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;4&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;inputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;ckpt_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;realisticVisionV60B1_v51HyperVAE.safetensors&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;class_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CheckpointLoaderSimple&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;_meta&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Load Checkpoint&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;5&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;inputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;width&quot;</span><span class="punctuation">:</span> <span class="number">512</span><span class="punctuation">,</span> <span class="attr">&quot;height&quot;</span><span class="punctuation">:</span> <span class="number">512</span><span class="punctuation">,</span> <span class="attr">&quot;batch_size&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;class_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;EmptyLatentImage&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;_meta&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Empty Latent Image&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;6&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;inputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;instagram photo, front shot, portrait photo of a 24 y.o woman, wearing dress, beautiful face, cinematic shot, dark shot&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;clip&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;4&quot;</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;class_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CLIPTextEncode&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;_meta&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CLIP Text Encode (Prompt)&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;7&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;inputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;(nsfw, naked, nude, deformed iris, deformed pupils, semi-realistic, cgi, 3d, render, sketch, cartoon, drawing, anime, mutated hands and fingers:1.4), (deformed, distorted, disfigured:1.3), poorly drawn, bad anatomy, wrong anatomy, extra limb, missing limb, floating limbs, disconnected limbs, mutation, mutated, ugly, disgusting, amputation&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;clip&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;4&quot;</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;class_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CLIPTextEncode&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;_meta&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CLIP Text Encode (Prompt)&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;8&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;inputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;samples&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;10&quot;</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;vae&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;4&quot;</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;class_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;VAEDecode&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;_meta&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;VAE Decode&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;9&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;inputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;filename_prefix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ComfyUI&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;images&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;8&quot;</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;class_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SaveImage&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;_meta&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Save Image&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;10&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;inputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;add_noise&quot;</span><span class="punctuation">:</span> <span class="string">&quot;enable&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;noise_seed&quot;</span><span class="punctuation">:</span> <span class="number">794547607621135</span><span class="punctuation">,</span> <span class="attr">&quot;steps&quot;</span><span class="punctuation">:</span> <span class="number">6</span><span class="punctuation">,</span> <span class="attr">&quot;cfg&quot;</span><span class="punctuation">:</span> <span class="number">1.5</span><span class="punctuation">,</span> <span class="attr">&quot;sampler_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dpmpp_sde&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;scheduler&quot;</span><span class="punctuation">:</span> <span class="string">&quot;normal&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;start_at_step&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;end_at_step&quot;</span><span class="punctuation">:</span> <span class="number">10000</span><span class="punctuation">,</span> <span class="attr">&quot;return_with_leftover_noise&quot;</span><span class="punctuation">:</span> <span class="string">&quot;disable&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;4&quot;</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;positive&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;6&quot;</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;negative&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;7&quot;</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;latent_image&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;5&quot;</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;class_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;KSamplerAdvanced&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;_meta&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;KSampler (Advanced)&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>workflow</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;last_node_id&quot;</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span> <span class="attr">&quot;last_link_id&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span> <span class="attr">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">9</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SaveImage&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;pos&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">1451</span><span class="punctuation">,</span> <span class="number">189</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">210</span><span class="punctuation">,</span> <span class="number">270</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;flags&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;order&quot;</span><span class="punctuation">:</span> <span class="number">6</span><span class="punctuation">,</span> <span class="attr">&quot;mode&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;inputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IMAGE&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="number">9</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;outputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;widgets_values&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;ComfyUI&quot;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CheckpointLoaderSimple&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;pos&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">26</span><span class="punctuation">,</span> <span class="number">474</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">315</span><span class="punctuation">,</span> <span class="number">98</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;flags&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;order&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;mode&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;inputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;outputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MODEL&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MODEL&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;links&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">10</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;slot_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MODEL&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CLIP&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CLIP&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;links&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;slot_index&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CLIP&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;VAE&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;VAE&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;links&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">8</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;slot_index&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;VAE&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;Node name for S&amp;R&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CheckpointLoaderSimple&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;widgets_values&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;realisticVisionV60B1_v51HyperVAE.safetensors&quot;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">7</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CLIPTextEncode&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;pos&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">413</span><span class="punctuation">,</span> <span class="number">389</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">425.27801513671875</span><span class="punctuation">,</span> <span class="number">180.6060791015625</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;flags&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;order&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span> <span class="attr">&quot;mode&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;inputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;clip&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CLIP&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;clip&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;outputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CONDITIONING&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CONDITIONING&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;links&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">12</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;slot_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CONDITIONING&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;Node name for S&amp;R&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CLIPTextEncode&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;widgets_values&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;(nsfw, naked, nude, deformed iris, deformed pupils, semi-realistic, cgi, 3d, render, sketch, cartoon, drawing, anime, mutated hands and fingers:1.4), (deformed, distorted, disfigured:1.3), poorly drawn, bad anatomy, wrong anatomy, extra limb, missing limb, floating limbs, disconnected limbs, mutation, mutated, ugly, disgusting, amputation&quot;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">8</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;VAEDecode&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;pos&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">1209</span><span class="punctuation">,</span> <span class="number">188</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">210</span><span class="punctuation">,</span> <span class="number">46</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;flags&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;order&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span> <span class="attr">&quot;mode&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;inputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;samples&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LATENT&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;samples&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vae&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;VAE&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="number">8</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vae&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;outputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IMAGE&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IMAGE&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;links&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">9</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;slot_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IMAGE&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;Node name for S&amp;R&quot;</span><span class="punctuation">:</span> <span class="string">&quot;VAEDecode&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;widgets_values&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;KSamplerAdvanced&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;pos&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">862.98046875</span><span class="punctuation">,</span> <span class="number">167.984375</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">315</span><span class="punctuation">,</span> <span class="number">334</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;flags&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;order&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span> <span class="attr">&quot;mode&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;inputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;model&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MODEL&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;model&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;positive&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CONDITIONING&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="number">11</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;positive&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;negative&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CONDITIONING&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="number">12</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;negative&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;latent_image&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LATENT&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="number">15</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;latent_image&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;outputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LATENT&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LATENT&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;links&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">16</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LATENT&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;Node name for S&amp;R&quot;</span><span class="punctuation">:</span> <span class="string">&quot;KSamplerAdvanced&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;widgets_values&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;enable&quot;</span><span class="punctuation">,</span> <span class="number">794547607621135</span><span class="punctuation">,</span> <span class="string">&quot;randomize&quot;</span><span class="punctuation">,</span> <span class="number">6</span><span class="punctuation">,</span> <span class="number">1.5</span><span class="punctuation">,</span> <span class="string">&quot;dpmpp_sde&quot;</span><span class="punctuation">,</span> <span class="string">&quot;normal&quot;</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="number">10000</span><span class="punctuation">,</span> <span class="string">&quot;disable&quot;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">6</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CLIPTextEncode&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;pos&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">415</span><span class="punctuation">,</span> <span class="number">186</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">422.84503173828125</span><span class="punctuation">,</span> <span class="number">164.31304931640625</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;flags&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;order&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> <span class="attr">&quot;mode&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;inputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;clip&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CLIP&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;clip&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;outputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CONDITIONING&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CONDITIONING&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;links&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">11</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;slot_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CONDITIONING&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;Node name for S&amp;R&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CLIPTextEncode&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;widgets_values&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;instagram photo, front shot, portrait photo of a 24 y.o woman, wearing dress, beautiful face, cinematic shot, dark shot&quot;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;EmptyLatentImage&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;pos&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">473</span><span class="punctuation">,</span> <span class="number">609</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">315</span><span class="punctuation">,</span> <span class="number">106</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;flags&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;order&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span> <span class="attr">&quot;mode&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;inputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;outputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LATENT&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LATENT&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;links&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">15</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;slot_index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LATENT&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;Node name for S&amp;R&quot;</span><span class="punctuation">:</span> <span class="string">&quot;EmptyLatentImage&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;widgets_values&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">512</span><span class="punctuation">,</span> <span class="number">512</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;links&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="number">6</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="string">&quot;CLIP&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="number">5</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="number">7</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="string">&quot;CLIP&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="number">8</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">8</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="string">&quot;VAE&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="number">9</span><span class="punctuation">,</span> <span class="number">8</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="number">9</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="string">&quot;IMAGE&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="number">10</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="string">&quot;MODEL&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="number">11</span><span class="punctuation">,</span> <span class="number">6</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="string">&quot;CONDITIONING&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="number">12</span><span class="punctuation">,</span> <span class="number">7</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;CONDITIONING&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="number">15</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="string">&quot;LATENT&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="number">16</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="number">8</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="string">&quot;LATENT&quot;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;groups&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;config&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;extra&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;ds&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;scale&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span> <span class="attr">&quot;offset&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;node_versions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;comfy-core&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.3.14&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">0.4</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="使用LoRA"><a href="#使用LoRA" class="headerlink" title="使用LoRA"></a>使用LoRA</h3><p>首先我们下载<a target="_blank" rel="noopener" href="https://huggingface.co/stabilityai/stable-diffusion-xl-base-1.0">sd_xl_base_1.0</a>模型，LoRA需要使用与之对应的基础模型</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ComfyUI/models/checkpoints/</span><br><span class="line">wget &#x27;https://huggingface.co/stabilityai/stable-diffusion-xl-base-1.0/resolve/main/sd_xl_base_1.0.safetensors&#x27;</span><br></pre></td></tr></table></figure><p>之后我们再下载LoRA模型，这里我们使用的是<a target="_blank" rel="noopener" href="https://civitai.com/models/1423239/expressionism-cartoons?modelVersionId=1608668">Expressionism Cartoons</a>模型</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(base) root@VM-0-5-ubuntu:~# cd ComfyUI/models/loras/</span><br><span class="line">(base) root@VM-0-5-ubuntu:~/ComfyUI/models/loras# wget --content-disposition &#x27;https://civitai.com/api/download/models/1608668?type=Model&amp;format=SafeTensor&amp;token=$&#123;API_TOKEN&#125;&#x27;</span><br><span class="line">...</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 228489836 (218M) [application/octet-stream]</span><br><span class="line">Saving to: &#x27;Expressionism_Cartoons.safetensors&#x27;</span><br><span class="line"></span><br><span class="line">Expressionism_Cartoons.safetensors                        100%[=====================================================================================================================================&gt;] 217.90M  11.5MB/s    in 19s     </span><br><span class="line"></span><br><span class="line">2025-06-03 09:32:01 (11.7 MB/s) - &#x27;Expressionism_Cartoons.safetensors&#x27; saved [228489836/228489836]</span><br></pre></td></tr></table></figure><p>之后我们根据LoRA模型在Civitai提供的推荐设置，就可以生成对应的图片了</p><p><img src="/images/20250603/18.webp"></p><p>生成的图片如下</p><p><img src="/images/20250603/19.webp"></p><h3 id="使用ControlNet"><a href="#使用ControlNet" class="headerlink" title="使用ControlNet"></a>使用ControlNet</h3><p>首先需要安装<code>comfyui_controlnet_aux</code>节点，之后还要下载模型。ContrlNet模型是分版本的，与基础大模型要对应。如果基础模型是SD1.5，ControlNet模型也要选择SD1.5。我们从地址 <a target="_blank" rel="noopener" href="https://huggingface.co/lllyasviel/ControlNet-v1-1/tree/main">https://huggingface.co/lllyasviel/ControlNet-v1-1/tree/main</a> 可以下载模型，模型的不同类型含义如下</p><table><thead><tr><th>文件名</th><th>控制类型</th><th>输入图像类型</th><th>用途说明</th><th>推荐用途</th></tr></thead><tbody><tr><td><code>control_v11p_sd15_canny.pth</code></td><td>Canny Edge（边缘）</td><td>照片或图像</td><td>提取轮廓边缘</td><td>建筑、物体结构控制</td></tr><tr><td><code>control_v11p_sd15_depth.pth</code></td><td>Depth（深度）</td><td>照片或图像</td><td>模拟三维深度结构</td><td>景深、构图调整</td></tr><tr><td><code>control_v11p_sd15_inpaint.pth</code></td><td>Inpainting（重绘）</td><td>遮挡&#x2F;蒙版图像</td><td>区域重绘</td><td>修图、局部创作</td></tr><tr><td><code>control_v11p_sd15_lineart.pth</code></td><td>Line Art（线稿）</td><td>动漫风图像</td><td>提取黑白线稿</td><td>动漫风格建模</td></tr><tr><td><code>control_v11p_sd15_mlsd.pth</code></td><td>MLSD（直线检测）</td><td>建筑&#x2F;结构图像</td><td>提取直线</td><td>建筑、平面图等直线构图</td></tr><tr><td><code>control_v11p_sd15_normalbae.pth</code></td><td>Normal Map（法线图）</td><td>三维物体图像</td><td>表面结构建模</td><td>高级3D拟合</td></tr><tr><td><code>control_v11p_sd15_openpose.pth</code></td><td>OpenPose（姿态）</td><td>人物图像</td><td>骨架动作识别</td><td>指定人物动作&#x2F;舞姿</td></tr><tr><td><code>control_v11p_sd15_scribble.pth</code></td><td>Scribble（手绘草图）</td><td>简笔画、草图</td><td>草图转图像</td><td>草图创作、简笔画上色</td></tr><tr><td><code>control_v11p_sd15_seg.pth</code></td><td>Semantic Segmentation（分割图）</td><td>分割图（每块颜色代表一种物体）</td><td>提供语义结构控制</td><td>多物体控制，如人物+背景</td></tr><tr><td><code>control_v11p_sd15_softedge.pth</code></td><td>Soft Edge（柔边缘）</td><td>模糊边缘图</td><td>类似 Canny，但更柔和</td><td>人像、柔边轮廓控制</td></tr><tr><td><code>control_v11p_sd15s2_lineart_anime.pth</code></td><td>Anime Line Art</td><td>动漫线稿</td><td>动漫草图 → 动漫图</td><td>高拟真二次元创作</td></tr></tbody></table><p>我们这里只需要下载我们所需要的模型即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd ComfyUI/models/controlnet/</span><br><span class="line">wget &#x27;https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11f1p_sd15_depth.pth&#x27;</span><br><span class="line">wget &#x27;https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11p_sd15_canny.pth&#x27;</span><br><span class="line">wget &#x27;https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11p_sd15_openpose.pth&#x27;</span><br><span class="line">wget &#x27;https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11p_sd15_scribble.pth&#x27;</span><br></pre></td></tr></table></figure><p>下载好了模型之后我们先新建一个默认工作流。之后创建如下节点：</p><p><em>加载原始输入图像，作为ControlNet的参考图像</em></p><pre><code>Add Node -&gt; image -&gt; Load Image
</code></pre><p><em>使用Canny边缘检测算法提取输入图像的边缘轮廓，生成黑白边缘图</em></p><pre><code>Add Node -&gt; ControlNet Preprocessors -&gt; Line Extractors -&gt; Canny Edge
</code></pre><p><em>加载ControlNet预训练模型文件，如control_v11p_sd15_canny.pth等</em></p><pre><code>Add Node -&gt; loaders -&gt; Load ControlNet Model
</code></pre><p><em>将ControlNet模型应用到条件编码上，结合边缘图控制生成过程</em></p><pre><code>Add Node -&gt; conditioning -&gt; controlnet -&gt; Apply ControlNet
</code></pre><p><em>预览最终生成的图像结果</em></p><pre><code>Add Node -&gt; image -&gt; Preview Image
</code></pre><p>建好了工作节点之后，我们可以使用Canny Edge为图片生成线图</p><p><img src="/images/20250603/21.webp"></p><p>之后我们对工作流进行整合，从而根据原图生成类似的图片</p><p><img src="/images/20250603/22.webp"></p><p>实际生成的图片如下</p><p><img src="/images/20250603/20.png"></p><h3 id="使用SDXL版本的ControlNet"><a href="#使用SDXL版本的ControlNet" class="headerlink" title="使用SDXL版本的ControlNet"></a>使用SDXL版本的ControlNet</h3><p>SDXL提供了<a target="_blank" rel="noopener" href="https://huggingface.co/xinsir/controlnet-union-sdxl-1.0">多合一的ControlNet模型</a>，不再需要下载多个文件，只需要使用一个模型即可，能有效节省磁盘空间。</p><pre><code>cd ComfyUI/models/controlnet/
wget &#39;https://huggingface.co/xinsir/controlnet-union-sdxl-1.0/resolve/main/diffusion_pytorch_model_promax.safetensors&#39;
</code></pre><p>下载好了之后，我们还是先加载默认工作流，之后创建ControlNet的相关节点。在创建的时候可以使用鼠标左键快速双击，然后在输入框中搜索需要使用的节点。</p><p>因为这里需要使用SDXL的模型，所以我们还是使用<code>sd_xl_base_1.0</code>模型，并且搭配LoRA一起使用</p><p><img src="/images/20250603/25.webp"></p><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1VG411d7Se">一口气学ComfyUI系列教程</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/joy99/p/18399471">ComfyUI基础教程</a></p></div><div class="post-copyright"><div><strong>本文链接：</strong> <span title="ComfyUI的操作与使用">https://www.nosuchfield.com/2025/03/31/ComfyUI-Operation-and-Usage/</span></div><div><strong>版权声明： </strong>本博客所有文章均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处！</div></div><style>summary{cursor:pointer;margin-bottom:10px}summary:focus{outline:0}</style><script src="/js/code-enhancer.js"></script><script src="/js/pangu.min.js"></script><script>pangu.spacingPage()</script><script>function backToTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script defer src="https://cloud.umami.is/script.js" data-website-id="267e4aaf-8cb5-464d-b16c-89e66283e505"></script><div class="post-footer"><ul class="post-tag-list" itemprop="keywords"><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/AI/" rel="tag">AI</a></li><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/ComfyUI/" rel="tag">ComfyUI</a></li><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/Stable-Diffusion/" rel="tag">Stable Diffusion</a></li><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/%E5%9B%BE%E5%83%8F%E7%94%9F%E6%88%90/" rel="tag">图像生成</a></li><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a></li></ul><span onclick="backToTop()" class="top">返回顶部</span></div></article><footer><span>&copy; 2015 - 2025</span> <span class="author">Raymond</span> <span style="float:right"><span class="upyun">本网站由<a target="_blank" rel="noopener" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"> <img src="/images/others/upyun.png"></a>提供CDN加速&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <a class="filing" href="https://beian.miit.gov.cn/" target="_blank">苏ICP备15057335号</a> <a class="github" href="https://github.com/RitterHou" target="_blank">GitHub</a></span></footer></div></body></html>