<!DOCTYPE html><html lang="zh-Hans"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title>HashTable 的 Python 实现 - 侯锐的思考与分享</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><meta name="keywords" content="数据结构"><meta name="description" content="&lt;p&gt;HashTable 是一种非常常见且用途十分广泛的数据结构，使用 HashTable 可以大大的提高数据的检索速度，是一种非常优秀的结构。&lt;/p&gt;
&lt;h3 id=&#34;1-Hash-算法&#34;&gt;&lt;a href=&#34;#1-Hash-算法&#34; class=&#34;headerlink&#34; title=&#34;1.Hash 算法&#34;&gt;&lt;/a&gt;1.Hash 算法&lt;/h3&gt;&lt;p&gt;既然要说到 HashTable,那首先需要明白 Hash 是什么意思。Hash 的中文中翻译是“散列”，这里我感觉这个翻译还是比较奇怪的，并不能够做到让人见名知意。&lt;/p&gt;
&lt;p&gt;Hash 是一类算法的统称，下面引用维基百科中对 Hash 函数的介绍&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;散列函数（或散列算法，又称哈希函数，英语：Hash Function）是一种从任何一种数据中创建小的数字“指纹”的方法。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;还是有点抽象？其实，Hash 函数就是对某一个复杂数据进行计算，然后得到一个不是那么复杂的数据，但是这个新的数据又能够代表它的原始数据，这就不难理解维基百科中称哈希函数创建的是数据的“指纹”了，"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="侯锐的思考与分享" type="application/atom+xml"></head><body><div class="container"><header class="header"><div class="blog-title"><a href="/" class="logo">侯锐的思考与分享</a><div class="subtitle"></div></div><nav class="navbar"><ul class="menu"><li class="menu-item"><a href="/" class="menu-item-link" data-no-instant>主页</a></li><li class="menu-item"><a href="/atom.xml" class="menu-item-link" data-no-instant>订阅</a></li><li class="menu-item"><a href="/search" class="menu-item-link" data-no-instant>搜索</a></li></ul></nav></header><article class="post"><div class="post-title"><h1 class="article-title">HashTable 的 Python 实现</h1></div><div class="post-meta"><span class="post-time">2016-07-29</span></div><div class="post-content"><p>HashTable 是一种非常常见且用途十分广泛的数据结构，使用 HashTable 可以大大的提高数据的检索速度，是一种非常优秀的结构。</p><h3 id="1-Hash-算法"><a href="#1-Hash-算法" class="headerlink" title="1.Hash 算法"></a>1.Hash 算法</h3><p>既然要说到 HashTable,那首先需要明白 Hash 是什么意思。Hash 的中文中翻译是“散列”，这里我感觉这个翻译还是比较奇怪的，并不能够做到让人见名知意。</p><p>Hash 是一类算法的统称，下面引用维基百科中对 Hash 函数的介绍</p><blockquote><p>散列函数（或散列算法，又称哈希函数，英语：Hash Function）是一种从任何一种数据中创建小的数字“指纹”的方法。</p></blockquote><p>还是有点抽象？其实，Hash 函数就是对某一个复杂数据进行计算，然后得到一个不是那么复杂的数据，但是这个新的数据又能够代表它的原始数据，这就不难理解维基百科中称哈希函数创建的是数据的“指纹”了，很容易理解，现实生活中指纹是对某一个特定的人的代表，而相对于对整个人的处理，指纹的处理则简单得多。</p><p>和每个人的指纹都不同不一样，不同的数据的散列值是有可能会一样的，不同的数据产生了同样的散列值的情况称之为“碰撞”，优秀的哈希函数应该尽可能的降低产生数据碰撞的几率。</p><p>正是因为“碰撞”的存在，所以 Hash 函数是不能够从散列值计算出原值的（读者可以想一想为什么）。与此同时，散列函数必须不具有可逆性，这一特性使得 Hash 函数在密码学领域得到了极其广泛的应用。</p><p>一个典型的 Hash 算法是将整数除以一个常量并且取余法，得到的余数就是散列值，本文是用的是这种算法。</p><h3 id="2-HashTable"><a href="#2-HashTable" class="headerlink" title="2.HashTable"></a>2.HashTable</h3><p>当我们在对数据进行增删查操作的时候，如果数据本身很大，则会严重的降低数据的操作效率。HashTable 的核心思想是对于每一个数据，根据某种给定的 Hash 函数，计算出数据的散列值，然后根据散列值来进行查找。因为散列值在设计之初就是十分精简的，所以能够很好的提升数据的操作速度。</p><p>使用散列值来进行值的查找已经很好能够很好的提高数据的查询速度了，但这样仍然是存在问题的，问题的起因就是因为“碰撞”。由于散列函数本身的性质，导致多个不同的数据可能会有相同的散列值，此时光靠散列值肯定无法进行值的查找，一种比较典型的解决方式是通过链表这种数据结构来保存散列值相同的数据。</p><p>当进行数据插入到哈希表的时候，如果发现该数据的散列值在之前已经存在，则把散列值一样的数据做成一个链表，把最新的数据插入到该链表的尾部，而该链表本身则会把插入到“槽”中，这是一种由数组和链表组合的数据结构。</p><p><img src="/images/20160730/HashTable.png" alt="哈希表"></p><p>如上图所示，左边的槽保存的是散列值，拥有同样的散列值的数据会被存放在同一个槽中，而槽的右边则是一个链表，用来把散列值相同的数据给区分并保存起来。</p><p>我们可以把 HashTable 类比为一本书，这里的散列值对应的就是书的目录，我们可以把书中具体的数据用目录的中的页码表示出来。书的目录会存在很多的章节，这里章节就对应的是 HashTable 中的槽部分，同样，书也会存在多个小节属于同一个章节的情况，所以每个槽（即章节）又可以由多个链表的节点（对应目录中的小节）组成。</p><h3 id="3-HashTable-的-Python-实现"><a href="#3-HashTable-的-Python-实现" class="headerlink" title="3.HashTable 的 Python 实现"></a>3.HashTable 的 Python 实现</h3><p>这里给出了 HashTable 的一种 Python 实现方式，包含了初始化（隐式的）、插入、查找、删除以及打印表结构这几个方法。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line">num = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 一个数据节点</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, data</span>):</span><br><span class="line">        self.data = data</span><br><span class="line">        self.next_node = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set_next</span>(<span class="params">self, node</span>):</span><br><span class="line">        self.next_node = node</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_next</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.next_node</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_data</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.data</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">data_equals</span>(<span class="params">self, data</span>):</span><br><span class="line">        <span class="keyword">return</span> self.data == data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HashTable</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.value = [<span class="literal">None</span>] * num</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">insert</span>(<span class="params">self, data</span>):</span><br><span class="line">        <span class="keyword">if</span> self.search(data):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">        i = data % num</span><br><span class="line">        node = Node(data)</span><br><span class="line">        <span class="keyword">if</span> self.value[i] <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            self.value[i] = node</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            head = self.value[i]</span><br><span class="line">            <span class="keyword">while</span> head.get_next() <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                head = head.get_next()</span><br><span class="line">            head.set_next(node)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">self, data</span>):</span><br><span class="line">        i = data % num</span><br><span class="line">        <span class="keyword">if</span> self.value[i] <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            head = self.value[i]</span><br><span class="line">            <span class="keyword">while</span> head <span class="keyword">and</span> <span class="keyword">not</span> head.data_equals(data):</span><br><span class="line">                head = head.get_next()</span><br><span class="line">            <span class="keyword">if</span> head:</span><br><span class="line">                <span class="keyword">return</span> head</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">delete</span>(<span class="params">self, data</span>):</span><br><span class="line">        <span class="keyword">if</span> self.search(data):</span><br><span class="line">            i = data % num</span><br><span class="line">            <span class="keyword">if</span> self.value[i].data_equals(data):</span><br><span class="line">                self.value[i] = self.value[i].get_next()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                head = self.value[i]</span><br><span class="line">                <span class="keyword">while</span> <span class="keyword">not</span> head.get_next().data_equals(data):</span><br><span class="line">                    head = head.get_next()</span><br><span class="line">                head.set_next(head.get_next().get_next())</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">echo</span>(<span class="params">self</span>):</span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> head <span class="keyword">in</span> self.value:</span><br><span class="line">            <span class="built_in">print</span> <span class="built_in">str</span>(i) + <span class="string">&#x27;:\t&#x27;</span>,</span><br><span class="line">            <span class="keyword">if</span> head <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="built_in">print</span> <span class="literal">None</span>,</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">while</span> head <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                    <span class="built_in">print</span> <span class="built_in">str</span>(head.get_data()) + <span class="string">&#x27; -&gt;&#x27;</span>,</span><br><span class="line">                    head = head.get_next()</span><br><span class="line">                <span class="built_in">print</span> <span class="literal">None</span>,</span><br><span class="line">            <span class="built_in">print</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    hashTable = HashTable()</span><br><span class="line">    hashTable.insert(<span class="number">10</span>)</span><br><span class="line">    hashTable.insert(<span class="number">11</span>)</span><br><span class="line">    hashTable.insert(<span class="number">1</span>)</span><br><span class="line">    hashTable.echo()</span><br><span class="line">    hashTable.delete(<span class="number">1</span>)</span><br><span class="line">    hashTable.echo()</span><br></pre></td></tr></table></figure><h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><p>1.<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%95%A3%E5%88%97%E5%87%BD%E6%95%B8">散列函数 - 维基百科，自由的百科全书</a><br>2.<a target="_blank" rel="noopener" href="http://blog.csdn.net/feixiaoxing/article/details/6885657"> 一步一步写算法（之hash表）</a></p></div><div class="post-copyright"><div><strong>本文链接：</strong> <span title="HashTable 的 Python 实现">https://www.nosuchfield.com/2016/07/29/the-python-implementationp-of-HashTable/</span></div><div><strong>版权声明： </strong>本博客所有文章均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处！</div></div><style>summary{cursor:pointer;margin-bottom:10px}summary:focus{outline:0}</style><script src="/js/code-enhancer.js"></script><script src="/js/pangu.min.js"></script><script>pangu.spacingPage()</script><script>function backToTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script><script defer src="https://cloud.umami.is/script.js" data-website-id="267e4aaf-8cb5-464d-b16c-89e66283e505"></script><div class="post-footer"><ul class="post-tag-list" itemprop="keywords"><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li></ul><span onclick="backToTop()" class="top">返回顶部</span></div></article><footer><span>&copy; 2015 - 2025</span> <span class="author">Raymond</span> <span style="float:right"><span class="upyun">本网站由<a target="_blank" rel="noopener" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"> <img src="/images/others/upyun.png"></a>提供CDN加速&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <a class="filing" href="https://beian.miit.gov.cn/" target="_blank">苏ICP备15057335号</a> <a class="github" href="https://github.com/RitterHou" target="_blank">GitHub</a></span></footer></div></body></html>